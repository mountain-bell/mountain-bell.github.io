"use strict";var DomTrigger=(()=>{var E=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var H=Object.prototype.hasOwnProperty;var O=(e,t)=>{for(var i in t)E(e,i,{get:t[i],enumerable:!0})},x=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of C(t))!H.call(e,o)&&o!==i&&E(e,o,{get:()=>t[o],enumerable:!(n=_(t,o))||n.enumerable});return e};var L=e=>x(E({},"__esModule",{value:!0}),e);var K={};O(K,{default:()=>q});function p(e){return/^[a-z][a-z0-9]*(?:-[a-z0-9]+)*$/.test(e)}function g(e,t){let i=[];return e.classList.forEach(n=>{if(!n.startsWith(t))return;let o=n.slice(t.length);p(o)&&i.push(o)}),i}var h=new WeakMap;function I(e,t){let i=`data-uncache-${t}`,n=!e.hasAttribute(i);if(n){let l=h.get(e)?.get(t);if(l)return l}let o=n?`data-${t}`:i,s=e.getAttribute(o);if(!s)return{};let c;try{c=JSON.parse(s)}catch{throw new Error(`[DomTrigger] Invalid JSON in ${o}: ${s}`)}if(n){let a=h.get(e)??new Map;a.set(t,c),h.set(e,a)}return c}function T(e,t){let i=e.boundingClientRect,n=i.top+i.height/2,o=window.innerHeight/2;return Math.abs(n-o)<=t}var w=new Map,d={set(e,t){w.set(e,t)},get(e){return w.get(e)},delete(e){w.delete(e)},clear(){w.clear()}};var r="js-",$=`${r}load-`,v=`${r}viewin-`,y=`${r}viewout-`,b=new WeakMap,k={click:`${r}click-`,submit:`${r}submit-`,change:`${r}change-`,input:`${r}input-`,focusin:`${r}focusin-`,focusout:`${r}focusout-`,pointerdown:`${r}pointerdown-`,pointermove:`${r}pointermove-`,pointerup:`${r}pointerup-`,pointercancel:`${r}pointercancel-`,transitionend:`${r}transitionend-`,animationend:`${r}animationend-`,visibilitychange:`${r}visibilitychange-`,pageshow:`${r}pageshow-`,pagehide:`${r}pagehide-`,online:`${r}online-`,offline:`${r}offline-`,copy:`${r}copy-`,paste:`${r}paste-`,keydown:`${r}keydown-`,keyup:`${r}keyup-`,mouseover:`${r}mouseover-`,mouseout:`${r}mouseout-`},F=new Set(["visibilitychange","pageshow","pagehide","online","offline"]),R=new Set,D=!1;function N(e,t){if(!p(e))throw new Error(`[DomTrigger.use] Invalid trigger name: "${e}". Use kebab-case.`);d.set(e,t)}async function m(e,t,i){if(!p(e))throw new Error(`[DomTrigger.invoke] Invalid trigger name: "${e}". Use kebab-case.`);let n=d.get(e);if(!n)return;let o=I(t,e);await n(t,o,{name:e,event:i})}async function W(e,t,i){if(!p(e))throw new Error(`[DomTrigger.run] Invalid trigger name: "${e}". Use kebab-case.`);let n=d.get(e);n&&await n(t,i??{},{name:e})}async function A(){if(typeof document>"u")return;let e=Array.from(document.querySelectorAll(`[class^="${$}"], [class*=" ${$}"]`));for(let t of e){let i=g(t,$);for(let n of i)m(n,t)}}async function M(){if(typeof document>"u")return;let e=k.pageshow;if(!e)return;let t=document.body,i=g(t,e);for(let n of i)m(n,t)}function X(e){if(typeof document>"u"||R.has(e))return;R.add(e);let t=k[e];if(!t)return;(e==="online"||e==="offline"?window:document).addEventListener(e,o=>{if(e==="pointermove"&&!D)return;(e==="pointerup"||e==="pointercancel")&&(D=!1);let s=F.has(e)?document.body:o.target instanceof Element?o.target:null;if(!s)return;let c=s.closest(`[class^="${t}"], [class*=" ${t}"]`);if(!c)return;e==="pointerdown"&&(D=!0);let a=g(c,t);for(let l of a)m(l,c,o)})}function S(){for(let e of Object.keys(k))X(e)}function P(){if(typeof document>"u"||typeof IntersectionObserver>"u")return;let e=new IntersectionObserver(n=>{for(let o of n){if(!(o.target instanceof Element))continue;let s=o.target,c=!1,a=s.getAttribute("data-view-center");if(a!==null){let u=a?parseInt(a,10):20,f=u>=0?u:20;c=T(o,f)}else{let u=s.getAttribute("data-view-ratio"),f=u?parseFloat(u):0,V=f>=0&&f<=1?f:0;c=o.intersectionRatio>=V}let l=b.get(s);if(o.isIntersecting&&c){if(l==="in")continue;let u=g(s,v);for(let f of u)m(f,s);b.set(s,"in")}else{if(l!=="in")continue;let u=g(s,y);for(let f of u)m(f,s);b.set(s,"out")}}},{threshold:Array.from({length:11},(n,o)=>o/10)}),t=[`[class^="${v}"]`,`[class*=" ${v}"]`,`[class^="${y}"]`,`[class*=" ${y}"]`].join(", ");document.querySelectorAll(t).forEach(n=>e.observe(n))}function U(e){d.delete(e)}function j(){d.clear()}function z(){A(),M(),S(),P()}var J={use:N,invoke:m,run:W,runLoad:A,runShow:M,listen:S,observeView:P,unuse:U,clear:j,setup:z},q=J;return L(K);})();
DomTrigger = DomTrigger.default || DomTrigger;
//# sourceMappingURL=dom-trigger.js.map
